@model IEnumerable<TecBurguer.Models.Hamburguer>

@{
    ViewData["Title"] = "Index";
}

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Ranchers&family=Poppins:wght@300;500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="~/css/Hamburgueres.css" rel="stylesheet" />
<div class="page-header">
    <h1 class="page-title">GERENCIAR HAMBÚRGUERES</h1>
    <p class="page-subtitle">Adicione, edite ou remova itens do cardápio</p>
</div>

<div class="burger-grid">

    <a asp-action="Create" class="burger-card create-card">
        <div class="create-icon">+</div>
        <div class="create-text">NOVO ITEM</div>
    </a>

    @foreach (var item in Model)
    {
        bool temEstoque = item.HamburguerIgredientes.Any() &&
        item.HamburguerIgredientes.All(i => i.IdIngredienteNavigation!.Quantidade >= i.QuantidadeNecessario);

        <div class="burger-card">

            @if (temEstoque)
            {
                <a asp-controller="Ofertas" asp-action="Create" asp-route-hamburguerId="@item.IdHamburguer" class="btn-offer-float">
                    <i class="fas fa-tag"></i> Oferta
                </a>
            }
            else
            {
                <div class="out-of-stock-badge">ESGOTADO</div>
            }

            <img src="@Html.DisplayFor(modelItem => item.Imagem)"
                 class="card-img-top @(temEstoque ? "" : "grayscale")"
                 alt="@item.Nome"
                 onerror="this.src='/css/Imagens/BurguerLogo.png'">

            <div class="card-body">
                <h3 class="card-title">@item.Nome</h3>

                <p class="card-text">@item.Descricao</p>

                <div class="card-price">R$ @item.Preco</div>

                <div class="action-buttons">
                    <a asp-action="Details" asp-route-id="@item.IdHamburguer" class="btn-action btn-details">
                        Detalhes
                    </a>
                    <a asp-action="Edit" asp-route-id="@item.IdHamburguer" class="btn-action btn-edit" title="Editar">
                        <i class="fas fa-pen"></i>
                    </a>
                    <a asp-action="Delete" asp-route-id="@item.IdHamburguer" class="btn-action btn-delete" title="Excluir">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
            </div>
        </div>
    }
</div>